# major page tags
from collections import defaultdict
from collections.abc import Iterable


major_tags = {"joke", "poetry", "creepypasta"}

supplements_types = {
    "experiment",
    "exploration",
    "incident",
    "interview",
}

object_classes = {
    "safe",
    "euclid",
    "keter",
    "thaumiel",
    "apollyon",
    "archon",
    "ticonderoga",
    "neutralized",
    "decommissioned",
    "pending",
    "esoteric-class",
}

attributes = {
    "adaptive",
    "alive",
    "amorphous",
    "autonomous",
    "bacteria",
    "clown",
    "fungus",
    "ghost",
    "hive-mind",
    "hostile",
    "humanoid",
    "metamorphic",
    "predatory",
    "plant",
    "politician",
    "sapient",
    "species",
    "swarm",
    "superhero",
    "tree",
    "virus",
    "animal",
    "amphibian",
    "arachnid",
    "arthropod",
    "bear",
    "bee",
    "bird",
    "bovine",
    "butterfly",
    "canine",
    "cephalopod",
    "cetacean",
    "crustacean",
    "deer",
    "dinosaur",
    "equine",
    "feline",
    "fish",
    "insect",
    "invertebrate",
    "primate",
    "rabbit",
    "reptile",
    "rodent",
    "shark",
    "snake",
    "worm",
    "biological",
    "biohazard",
    "blood",
    "cadaver",
    "contagion",
    "dental",
    "extremity",
    "genetic",
    "medical",
    "nocturnal",
    "ocular",
    "parasitic",
    "reanimation",
    "reproductive",
    "sexual",
    "skeletal",
    "toxic",
    "addictive",
    "antimemetic",
    "auditory",
    "cognitohazard",
    "compulsion",
    "empathic",
    "gustatory",
    "hallucination",
    "infohazard",
    "knowledge",
    "language",
    "memetic",
    "mimetic",
    "memory-affecting",
    "mind-affecting",
    "neurological",
    "observational",
    "olfactory",
    "predictive",
    "sensory",
    "sleep",
    "tactile",
    "telepathic",
    "visual",
    "acoustic",
    "chemical",
    "corrosive",
    "ectoentropic",
    "electrical",
    "electromagnetic",
    "entropic",
    "fire",
    "gaseous",
    "gravity",
    "immobile",
    "indestructible",
    "intangible",
    "light",
    "liquid",
    "magnetic",
    "meteorological",
    "microscopic",
    "miniature",
    "mobile",
    "portal",
    "paradox",
    "polyhedral",
    "radioactive",
    "reality-bending",
    "self-repairing",
    "self-replicating",
    "shadow",
    "spatial",
    "sphere",
    "telekinetic",
    "teleportation",
    "temporal",
    "thaumaturgy",
    "thermal",
    "thermodynamic",
    "transfiguration",
    "transmission",
    "vibration",
    "appliance",
    "artistic",
    "artificial-intelligence",
    "artifact",
    "clockwork",
    "clothing",
    "Cinema",
    "computer",
    "currency",
    "document",
    "electronic",
    "food",
    "inscription",
    "jewelry",
    "mechanical",
    "media",
    "musical",
    "online",
    "performance",
    "photographic",
    "robotic",
    "sculpture",
    "tool",
    "toy",
    "weapon",
    "vehicle",
    "afterlife",
    "airborne",
    "aquatic",
    "building",
    "city",
    "extradimensional",
    "extraterrestrial",
    "forest",
    "geological",
    "island",
    "library",
    "location",
    "moon",
    "planet",
    "satellite",
    "school",
    "structure",
    "subterranean",
    "sun",
    "anomalous-event",
    "corporate",
    "concept",
    "exchange",
    "foundation-made",
    "future",
    "game",
    "historical",
    "k-class-scenario",
    "legality",
    "loop",
    "mathematical",
    "military",
    "meta",
    "narrative",
    "probability",
    "phenomenon",
    "religious",
    "ritual",
    "sport",
    "uncontained",
}

genres_and_themes = {
    "absurdist-fiction",
    "action",
    "adventure",
    "bittersweet",
    "bleak",
    "comedy",
    "black-comedy",
    "chase",
    "crime-fiction",
    "fantasy",
    "heartwarming",
    "horror",
    "body-horror",
    "cosmic-horror",
    "psychological-horror",
    "lgbtq",
    "military-fiction",
    "mystery",
    "mythological-fiction",
    "religious-fiction",
    "romance",
    "science-fiction",
    "slice-of-life",
    "spy-fiction",
    "surrealist-fiction",
    "alternate-history",
    "christmas",
    "dystopian",
    "otherworldly",
    "period-piece",
    "post-apocalyptic",
    "space-opera",
    "western",
    "utopian",
    "creepypasta",
    "first-person",
    "foundation-format",
    "journal",
    "no-dialogue",
    "orientation",
    "second-person",
    "worldbuilding",
    "_genreless",
}

group_of_interest = {
    "abnormalities",
    "last-hope",
    "angle-grinders",
    "decommissioning-dept",
    "delta-t",
    "ethics-committee",
    "ettra",
    "fire-suppression-dept",
    "folklore-dept",
    "miscommunications",
    "department-of-other",
    "pataphysics-dept",
    "procurement-liquidation-dept",
    "surrealistics-dept",
    "tactical-theology",
    "samsara",
    "telecom-office",
    "unreality-dept",
    "accelerate-the-future",
    "alexylva",
    "ambrose-restaurant",
    "anderson",
    "arcadia",
    "are-we-cool-yet",
    "asci",
    "avelar",
    "black-queen",
    "british-occult-service",
    "broken-god",
    "brothers-of-death",
    "chaos-insurgency",
    "chicago-spirit",
    "children-of-the-night",
    "children-of-the-torch",
    "class-of-76",
    "cogwork-orthodoxy",
    "daevite",
    "deer-college",
    "dr-wondertainment",
    "factory",
    "fifthist",
    "gamers-against-weed",
    "giftschreiber",
    "global-occult-coalition",
    "goldbaker-reinz",
    "golden-horde",
    "greazeburger",
    "gru-division-p",
    "herman-fuller",
    "hmfscp",
    "homo-sapiens-sidhe",
    "horizon-initiative",
    "icsut",
    "ijamea",
    "joicl",
    "just-girly-things",
    "madao",
    "mages-academy",
    "manna-charitable-foundation",
    "marshall-carter-and-dark",
    "maxwellism",
    "miracle-liberation-front",
    "nameless",
    "nobody",
    "obearwatch",
    "obskura",
    "oneiroi",
    "oria",
    "parawatch",
    "pattern-screamer",
    "pentagram",
    "prometheus",
    "sapphire",
    "sarkic",
    "scarlet-king",
    "second-hytoth",
    "serpents-hand",
    "shark-punching-center",
    "silicon-nornir",
    "sugarcomb-confectionery",
    "three-moons-initiative",
    "totleighsoft",
    "unusual-cargo",
    "unusual-incidents-unit",
    "valravn",
    "vikander-kneed",
    "wandsmen",
    "westhead-media",
    "wilsons-wildlife",
    "xia-dynasty",
}

canons = {
    "aces-and-eights",
    "aiad",
    "ad-astra",
    "alchemy-department",
    "antarctic-exchange",
    "apotheosis",
    "bellerverse",
    "broken-masquerade",
    "but-a-dream",
    "competitive-eschatology",
    "cool-war-2",
    "daybreak",
    "deepwell-catalog",
    "doctors-of-the-church",
    "dread&circuses",
    "end-of-death",
    "from-120s-archives",
    "green-king",
    "heimdall",
    "insect-hell",
    "Lampeter",
    "lolfoundation",
    "man-who-wasnt-there",
    "memoria-adytum",
    "nightfall",
    "Ninth-World",
    "no-return",
    "old-man-in-the-sea",
    "on-guard-43",
    "on-mount-golgotha",
    "only-game-in-town",
    "orcadia",
    "pitch-haven",
    "rats-nest",
    "resurrection",
    "s&c-plastics",
    "the-sharkest-timeline",
    "ship-in-a-bottle",
    "simulacrum",
    "sotm",
    "the-coldest-war",
    "the-gulf",
    "the-trashfire",
    "third-law",
    "twisted-pines",
    "unfounded",
    "unhuman",
    "war-on-all-fronts",
    "wonderful-world",
}

series = {
    "8000-dead-rats",
    "abcs-of-death",
    "admonition",
    "anabasis",
    "ao-tale",
    "appliance-war",
    "black-rabbit-company",
    "bury-the-survivors",
    "cack-hard",
    "classical-revival",
    "collector-tale",
    "etdp",
    "eternal-mxtape",
    "Eventyr",
    "forgotten-memories",
    "goc-casefiles",
    "harbinger",
    "hecatoncheires-cycle",
    "integration-program",
    "kiryu-labs",
    "mister",
    "mundus-Liberari",
    "new-faces",
    "old-foes",
    "olympia",
    "palisade",
    "project-crossover",
    "project-thaumiel",
    "team-bird",
    "time-after-time-password",
    "the-twin-sites",
    "untitled-series",
    "we-meet-again",
    "whore-of-blood",
    "w-i-t-c-h",
    "wrong-tomorrow",
    "yggdrasil-s-surveyor",
}

characters = {
    "8-ball",
    "aaron-siegel",
    "agent-adams",
    "agent-calendar",
    "agent-green",
    "agent-kazmarek",
    "agent-laferrier",
    "agent-lament",
    "agent-lurk",
    "agent-merlo",
    "agent-navarro",
    "agent-popescu",
    "agent-rodney",
    "agent-strelnikov",
    "agent-trauss",
    "agent-yoric",
    "alexandra",
    "alex-thorley",
    "chief-ibanez",
    "bailey-brothers",
    "captain-adrian",
    "d-7294",
    "d-11424",
    "director-aktus",
    "director-bold",
    "director-bohart",
    "director-diaghilev",
    "director-gillespie",
    "director-mcinnis",
    "director-mctiriss",
    "director-moose",
    "director-richter",
    "director-scout",
    "director-lague",
    "django-bridge",
    "doctor-asheworth",
    "doctor-blank",
    "doctor-bright",
    "doctor-cimmerian",
    "doctor-clef",
    "doctor-dan",
    "doctor-edison",
    "doctor-elliott",
    "doctor-elstrom",
    "doctor-everwood",
    "doctor-fynegan",
    "doctor-gears",
    "doctor-gerald",
    "doctor-glass",
    "doctor-heiden",
    "doctor-hoygull",
    "doctor-iceberg",
    "doctor-king",
    "doctor-kondraki",
    "doctor-light",
    "doctor-lillihammer",
    "doctor-mann",
    "doctor-mcdoctorate",
    "doctor-reynders",
    "doctor-rights",
    "doctor-rivera",
    "doctor-roget",
    "doctor-scranton",
    "doctor-shaw",
    "doctor-sinclair",
    "doctor-sokolsky",
    "doctor-sorts",
    "doctor-thereven",
    "doctor-vang",
    "doctor-wettle",
    "draven-kondraki",
    "general-bowe",
    "glacon",
    "greg-chudley",
    "hadfield-twins",
    "james-harkness",
    "judith-low",
    "kain-pathos-crow",
    "lombardi",
    "maria-jones",
    "maria-johnston",
    "marie-surratt",
    "marion-wheeler",
    "mark-kiryu",
    "odongo-tejani",
    "philip-deering",
    "primrose-esquire",
    "professor-bjornsen",
    "researcher-conwell",
    "researcher-james",
    "researcher-labelle",
    "researcher-lloyd",
    "researcher-rosen",
    "researcher-rex",
    "researcher-smalls",
    "researcher-talloran",
    "riven-mercer",
    "sheldon-katz",
    "samara-maclear",
    "simon-pietrykau",
    "thad-xyank",
    "the-administrator",
    "yossarian-leiner",
    "zyn-kiryu",
    "able",
    "alexei-belitrov",
    "alleged-god",
    "blackwood",
    "bobble-the-clown",
    "bones",
    "cain",
    "Blue-blooded-alien",
    "cousin-johnny",
    "doctor-spanko",
    "donkman",
    "fred",
    "grabnok",
    "geoffrey-quincy-harrison",
    "hard-to-destroy-reptile",
    "half-cat-josie",
    "heather-mason",
    "hogslice",
    "iris-thompson",
    "leslie",
    "moon-champion",
    "mr-fish",
    "murphy-law",
    "old-ai",
    "plague-doctor",
    "possessive-mask",
    "rainer-miller",
    "sauelsuesor",
    "shy-guy",
    "sigurros",
    "teenage-gaea",
    "ten-dots",
    "the-old-man",
    "tickle-monster",
    "the-sculpture",
    "the-specter",
    "aldon",
    "big-cheese-horace",
    "brainy-brian",
    "chaz-ambrose",
    "dado",
    "damien-nowak",
    "dc-al-fine",
    "eric",
    "esther-kogan",
    "faeowynn-wilson",
    "finnegan",
    "grand-karcist-ion",
    "halyna-ieva",
    "hanged-king",
    "holly-light",
    "icky",
    "iris-dark",
    "isabel-v",
    "jockjamsvol6",
    "jude-kriyot",
    "judy-papill",
    "kenneth-spencer",
    "kindness",
    "legate-trunnion",
    "lewitt-zairi-family",
    "lovataar",
    "manny",
    "mari-macphaerson",
    "nadox",
    "olivie-gwyneth",
    "orok",
    "pangloss",
    "percival-darke",
    "polaricecraps",
    "queen-mab",
    "professor-aw",
    "richard-chappell",
    "robert-bumaro",
    "robin-thorne",
    "ruiz-duchamp",
    "saint-hedwig",
    "saarn",
    "saturn-deer",
    "the-engineer",
    "the-critic",
    "thilo-zwist",
    "tim-wilson",
    "veronica-fitzroy",
    "vincent-anderson",
}

locations = {
    "7th-occult-war",
    "alagadda",
    "backdoor-soho",
    "deus-ex-machina",
    "esterberg",
    "eurtec",
    "hy-brasil",
    "la-rue-macabre",
    "three-portlands",
    "undervegas",
    "wanderers-library",
}

tag_categories = {
    "Supplement": supplements_types,
    "Object Class": object_classes,
    "Attribute": attributes,
    "Genre or theme": genres_and_themes,
    "Dept or group of interest": group_of_interest,
    "Canon": canons,
    "Series": series,
    "Major character": characters,
    "Location": locations,
}

tag_to_category = dict(
    [(tag, category) for (category, tags) in tag_categories.items() for tag in tags]
)

tag_allowlist: set[str] = set().union(*(v for v in tag_categories.values()))


def get_tags_to_category(tags: Iterable[str]):
    category_to_tags: defaultdict[str, set[str]] = defaultdict(set)

    for tag in tags:
        category = tag_to_category.get(tag, None)
        if category is None:
            continue

        category_to_tags[category].add(tag)

    return category_to_tags
